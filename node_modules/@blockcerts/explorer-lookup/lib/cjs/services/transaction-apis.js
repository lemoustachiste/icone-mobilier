"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.buildTransactionServiceUrl = void 0;
const api_1 = require("../constants/api");
const url_1 = require("../utils/url");
function appendApiIdentifier(url, explorerAPI) {
    if (!explorerAPI.key) {
        return url;
    }
    if (explorerAPI.key && !explorerAPI.keyPropertyName) {
        throw new Error(`No keyPropertyName defined for explorerAPI ${explorerAPI.serviceName}`);
    }
    return (0, url_1.safelyAppendUrlParameter)(url, explorerAPI.keyPropertyName, explorerAPI.key);
}
function buildTransactionServiceUrl({ explorerAPI, transactionIdPlaceholder = api_1.TRANSACTION_ID_PLACEHOLDER, transactionId = '', isTestApi = false }) {
    const { serviceURL } = explorerAPI;
    let apiUrl = typeof serviceURL === 'string' ? serviceURL : (isTestApi ? serviceURL.test : serviceURL.main);
    apiUrl = apiUrl.replace(transactionIdPlaceholder, transactionId);
    apiUrl = appendApiIdentifier(apiUrl, explorerAPI);
    return apiUrl;
}
exports.buildTransactionServiceUrl = buildTransactionServiceUrl;
